<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Facturas</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; margin: 24px; }
    table { border-collapse: collapse; width: 100%; }
    th, td { border-bottom: 1px solid #eee; padding: 8px 6px; text-align: left; vertical-align: top; }
    th { background: #fafafa; position: sticky; top: 0; }
    .muted { color: #666; }
    .filters { display: flex; gap: 10px; flex-wrap: wrap; align-items: end; margin-bottom: 12px; }
    .btn { padding: 8px 12px; border: 1px solid #222; background: #222; color: white; border-radius: 8px; cursor: pointer; }
    input { padding: 6px 8px; border: 1px solid #ddd; border-radius: 8px; }
    a { color: #0b5bd3; }
    code { background: #f7f7f7; padding: 2px 6px; border-radius: 6px; }
  </style>
</head>
<body>
  <h1>Facturas (hasta 500)</h1>
  <p class="muted">RFC: <code>{{ mi_rfc }}</code> · <a href="/">Importar más</a> · <a href="/summary">Resumen mensual</a></p>

  <form class="filters" method="get" action="/facturas">
    <div>
      <div class="muted">Tipo (I/E/P)</div>
      <input name="tipo" value="{{ tipo }}" placeholder="I" />
    </div>
    <div>
      <div class="muted">Naturaleza</div>
      <input name="naturaleza" value="{{ naturaleza }}" placeholder="ingreso/gasto/cobro/pago" />
    </div>
    <button class="btn" type="submit">Filtrar</button>
    <a href="/facturas" style="padding:8px 0;">Quitar filtros</a>
  </form>

  <table>
    <thead>
      <tr>
        <th>Fecha emisión</th>
        <th>Tipo</th>
        <th>Naturaleza</th>
        <th>UUID</th>
        <th>Emisor</th>
        <th>Receptor</th>
        <th>Total</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for f in facturas %}
      <tr>
        <td>{{ f.fecha_emision or "" }}</td>
        <td>{{ f.tipo_comprobante or "" }}</td>
        <td>{{ f.naturaleza or "" }}</td>
        <td>{{ f.uuid or "" }}</td>
        <td>{{ f.emisor_rfc or "" }}</td>
        <td>{{ f.receptor_rfc or "" }}</td>
        <td>{{ f.total or "" }}</td>
        <td><a href="/facturas/{{ f.id }}">Detalle</a></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</body>
</html>
